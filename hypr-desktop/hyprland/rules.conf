# ------------------ Converted Hyprland window/layerrules (v2-style) ------------------
# Notes:
#  - props now use `match:<prop>` (regex) and effects use named forms (e.g. `float on`, `size 60% 70%`).
#  - regexes are anchored ( ^(...)$ ) to be safe with Hyprland's stricter matching.
#  - keep your variables (e.g. $windowOpacity) as-is — Hyprland variables still work in effects.

# ######## Window rules ########
# apply opacity unless fullscreen
windowrule = opacity $windowOpacity override, match:fullscreen 0

# they use native transparency or we want them opaque -> set opacity 1 override
windowrule = opacity 1 override, match:class ^(foot|equibop|org\.quickshell|imv|swappy)$

# Center all floating windows (not xwayland cause popups)
windowrule = center on, match:float 1, match:xwayland 0

# Float
windowrule = float on, match:class ^(guifetch)$          # FlafyDev/guifetch
windowrule = float on, match:class ^(yad)$
windowrule = float on, match:class ^(zenity)$
windowrule = float on, match:class ^(wev)$
windowrule = float on, match:class ^(org\.gnome\.FileRoller|file-roller)$
windowrule = float on, match:class ^(blueman-manager)$
windowrule = float on, match:class ^(com\.github\.GradienceTeam\.Gradience)$
windowrule = float on, match:class ^(feh)$
windowrule = float on, match:class ^(imv)$
windowrule = float on, match:class ^(system-config-printer)$
windowrule = float on, match:class ^(org\.quickshell)$

# Float, resize and center
windowrule = float on, match:class ^(foot)$, match:title ^(nmtui)$
windowrule = size 60% 70%, match:class ^(foot)$, match:title ^(nmtui)$
windowrule = center on, match:class ^(foot)$, match:title ^(nmtui)$

windowrule = float on, match:class ^(org\.gnome\.Settings)$
windowrule = size 70% 80%, match:class ^(org\.gnome\.Settings)$
windowrule = center on, match:class ^(org\.gnome\.Settings)$

windowrule = float on, match:class ^(org\.pulseaudio\.pavucontrol|yad-icon-browser)$
windowrule = size 60% 70%, match:class ^(org\.pulseaudio\.pavucontrol|yad-icon-browser)$
windowrule = center on, match:class ^(org\.pulseaudio\.pavucontrol|yad-icon-browser)$

windowrule = float on, match:class ^(nwg-look)$
windowrule = size 50% 60%, match:class ^(nwg-look)$
windowrule = center on, match:class ^(nwg-look)$

# Special workspaces
# workspace effect uses dispatch-style workspace setting
windowrule = workspace special:sysmon, match:class ^(btop)$
windowrule = workspace special:music, match:class ^(feishin|Spotify|Supersonic)$
# match initial title because Spotify wayland may not have stable class
windowrule = workspace special:music, match:initial_title ^(Spotify( Free)?)$
windowrule = workspace special:communication, match:class ^(discord|equibop|vesktop|whatsapp)$
windowrule = workspace special:todo, match:class ^(Todoist)$

# Dialogs
windowrule = float on, match:title ^(Select|Open)( a)? (File|Folder)(s)?$
windowrule = float on, match:title ^File (Operation|Upload)( Progress)?$
windowrule = float on, match:title ^.* Properties$
windowrule = float on, match:title ^Export Image as PNG$
windowrule = float on, match:title ^GIMP Crash Debug$
windowrule = float on, match:title ^Save As$
windowrule = float on, match:title ^Library$

# Picture in picture (resize and move done via script)
# initial move so window doesn't shoot across the screen from the center
windowrule = move 100%-w-2% 100%-w-3%, match:title ^(Picture(-| )in(-| )[Pp]icture)$
#windowrule = keepaspectratio on, match:title ^(Picture(-| )in(-| )[Pp]icture)$
windowrule = float on, match:title ^(Picture(-| )in(-| )[Pp]icture)$
windowrule = pin on, match:title ^(Picture(-| )in(-| )[Pp]icture)$

# Steam
windowrule = rounding 10, match:title ^$, match:class ^(steam)$   # rounding for steam windows (title empty match used historically)
windowrule = float on, match:title ^(Friends List)$, match:class ^(steam)$
windowrule = immediate yes, match:class ^(steam_app_[0-9]+)$    # allow tearing for steam games (immediate yes)
windowrule = idle_inhibit always, match:class ^(steam_app_[0-9]+)$  # always idle inhibit when playing a steam game

# ATLauncher console
windowrule = float on, match:class ^(com-atlauncher-App)$, match:title ^(ATLauncher Console)$

# Autodesk Fusion 360
#windowrule = noblur on, match:title ^(Fusion360|(Marking Menu))$, match:class ^(fusion360\.exe)$

# Ugh xwayland popups
#windowrule = nodim on, match:xwayland 1, match:title ^(win[0-9]+)$
#windowrule = noshadow on, match:xwayland 1, match:title ^(win[0-9]+)$
windowrule = rounding 10, match:xwayland 1, match:title ^(win[0-9]+)$

# ######## Workspace rules ########
# (left as you had them — workspace syntax is unchanged)
workspace = w[tv1]s[false], gapsout:$singleWindowGapsOut
workspace = f[1]s[false], gapsout:$singleWindowGapsOut

# ######## Layer rules ########
# Layer rules accept namespace (use hyprctl layers to find namespaces).
# Use either `layerrule = <effect>, <namespace>` or explicit match:namespace prop.
layerrule = animation fade, match:namespace ^(hyprpicker)$       # Colour picker out animation
layerrule = animation fade, match:namespace ^(logout_dialog)$    # wlogout
layerrule = animation fade, match:namespace ^(selection)$        # slurp
layerrule = animation fade, match:namespace ^(wayfreeze)$

# Fuzzel
layerrule = animation popin 80%, match:namespace ^(launcher)$
layerrule = blur on, match:namespace ^(launcher)$

# Shell (caelestia)
layerrule = animation none, match:namespace ^(caelestia-(border-exclusion|area-picker))$
layerrule = animation fade, match:namespace ^(caelestia-(drawers|background))$

layerrule = blur on, match:namespace ^(caelestia-drawers)$
layerrule = ignore_alpha 0.57, match:namespace ^(caelestia-drawers)$
# ---------------------------------------------------------------------------

